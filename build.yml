name: Build sunesports

on:
    push:
        branches: [main]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - uses: actions/setup-node@v1
              with:
                  node-version: 12
            - name: Instalando NodeJs e modules
            - run: npm ci
            - run: node ./social.js
            - run: npm run build
            - run: npm run export
            - name: Dando deploy na Azure
              uses: TravisSpomer/deploy-to-azure-storage@v1.3.0
              with:
                  source-path: out/
                  sas-url: ${{ secrets.AZURE_SAS_URL }}
